<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kirby Super Star Intro</title>
    <style>
        /* --- Basic Setup --- */
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #111;
            font-family: 'Press Start 2P', sans-serif; /* A fitting retro font */
        }

        /* --- Game Screen Container --- */
        #game-container {
            width: 512px;
            height: 448px;
            background-color: black;
            position: relative;
            overflow: hidden;
            border: 2px solid #333;
            /* NEW: Add perspective for 3D transforms */
            perspective: 800px;
        }

        /* --- Scene Management --- */
        .scene {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease;
            /* NEW: Preserve 3D transformations for child elements */
            transform-style: preserve-3d;
        }

        .scene.active {
            opacity: 1;
            visibility: visible;
        }

        /* --- Sprites (Placeholder Blocks) --- */
        .sprite {
            position: absolute;
            background-size: contain;
            background-repeat: no-repeat;
        }

        /* == Scene 1: Logos == */
        #logo-scene {
            background-color: black;
        }
        #nintendo-logo, #halken-logo {
            color: white;
            display: flex; justify-content: center; align-items: center; font-size: 14px;
            left: 50%;
            /* NEW: Set transform origin to center for scaling */
            transform-origin: center center;
        }
        #nintendo-logo {
            width: 120px;
            height: 45px;
            background-color: #42a5f5; /* Light Blue */
            top: 35%;
            transform: translate(-50%, -50%) scale(0); /* Start scaled down */
        }
        #halken-logo {
            width: 80px;
            height: 60px;
            background-color: #4caf50; /* Green */
            top: 55%;
            transform: translate(-50%, -50%) scale(0); /* Start scaled down */
        }

        /* == Scene 2: Flying Animation == */
        #flying-scene {
             background-color: #2499ff; /* Sky Blue */
        }
        #kirby-container {
            position: absolute;
            width: 60px;
            height: 60px;
        }
        #kirby {
            width: 100%;
            height: 100%;
            background-color: #ff80ab; /* Pink */
            border-radius: 50%;
            /* NEW: Set transform origin for squash/stretch */
            transform-origin: bottom center;
        }
        #warp-star {
            width: 70px;
            height: 70px;
            background-color: #ffeb3b; /* Yellow */
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: -1;
        }
        .cloud {
            width: 80px;
            height: 50px;
            background-color: white;
            border-radius: 25px;
        }
        /* MODIFIED: Grass field converted to 3D plane */
        #grass-field {
            position: absolute;
            bottom: -50%; /* Start lower */
            width: 100%;
            height: 100%; /* Make taller to fill space when rotated */
            background-color: #66bb6a; /* Grass Green */
            transform-origin: bottom center; /* Pivot from the bottom */
            /* Start rotated and off-screen */
            transform: rotateX(70deg) translateY(300px);
        }
        #mountains {
            position: absolute;
            bottom: 0; /* Position at the "far end" of the grass */
            width: 100%;
            height: 80px; /* Taller to look right in perspective */
            background-color: #388e3c;
        }

        /* == Scene 3: Title Screen == */
        #title-scene {
            background-color: #f8bbd0;
        }
        #title-kirby {
            width: 150px;
            height: 130px;
            background-color: #ff80ab;
            position: absolute;
            top: 45%;
            left: 50%;
            transform: translate(-50%, -50%);
            border-radius: 50%;
            border: 5px solid #c2185b;
            color: white;
            display: flex; justify-content: center; align-items: center; font-size: 20px;
        }
        #title-logo {
            width: 400px;
            height: 200px;
            background-color: #fbc02d;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: -1;
            color: #c49000;
            display: flex; justify-content: center; align-items: center; font-size: 30px;
        }
        #title-copyright {
            position: absolute;
            bottom: 20px;
            width: 100%;
            text-align: center;
            color: #c2185b;
            font-size: 12px;
        }
        #spring-breeze-text {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 40px;
            color: #6a1b9a;
            background-color: rgba(0,0,0,0.8);
            opacity: 0;
            transition: opacity 1s ease;
        }

        /* --- NEW: Squash and Stretch Animations --- */
        .squash-in {
            animation: squash-stretch-in 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }
        .squash-land {
            animation: squash-land 0.3s ease-out forwards;
        }
        .stretch-takeoff {
            animation: stretch-takeoff 0.5s ease-in forwards;
        }
        
        @keyframes squash-stretch-in {
            0%   { transform: translate(-50%, -50%) scale(0.5, 1.5); }
            40%  { transform: translate(-50%, -50%) scale(1.3, 0.7); }
            70%  { transform: translate(-50%, -50%) scale(0.9, 1.1); }
            100% { transform: translate(-50%, -50%) scale(1, 1); }
        }

        @keyframes squash-land {
            0%   { transform: scale(1, 1); }
            50%  { transform: scale(1.3, 0.7); }
            100% { transform: scale(1, 1); }
        }

        @keyframes stretch-takeoff {
            0%   { transform: scale(1, 1); }
            50%  { transform: scale(0.8, 1.2); }
            100% { transform: scale(0.8, 1.2); } /* Hold stretch on takeoff */
        }
    </style>
</head>
<body>

<div id="game-container">
    <div id="logo-scene" class="scene">
        <div id="nintendo-logo" class="sprite">Nintendo</div>
        <div id="halken-logo" class="sprite">HALKEN</div>
    </div>

    <div id="flying-scene" class="scene">
        <div id="grass-field">
            <div id="mountains"></div>
        </div>
        <div id="kirby-container" class="sprite">
            <div id="warp-star" class="sprite"></div>
            <div id="kirby" class="sprite"></div>
        </div>
    </div>
    
    <div id="title-scene" class="scene">
        <div id="title-logo" class="sprite">TITLE EMBLEM</div>
        <div id="title-kirby" class="sprite">Kirby</div>
        <div id="title-copyright" class="sprite">...</div>
        <div id="spring-breeze-text">SPRING BREEZE</div>
    </div>
</div>


<script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- Element References ---
        const logoScene = document.getElementById('logo-scene');
        const nintendoLogo = document.getElementById('nintendo-logo');
        const halkenLogo = document.getElementById('halken-logo');
        const flyingScene = document.getElementById('flying-scene');
        const titleScene = document.getElementById('title-scene');
        const kirbyContainer = document.getElementById('kirby-container');
        const kirbySprite = document.getElementById('kirby');
        const grassField = document.getElementById('grass-field');
        const springBreeze = document.getElementById('spring-breeze-text');

        // --- Helper Functions ---
        const sleep = ms => new Promise(res => setTimeout(res, ms));

        function switchScene(activeScene) {
            document.querySelectorAll('.scene').forEach(scene => {
                scene.classList.remove('active');
            });
            activeScene.classList.add('active');
        }

        function createClouds() {
            for (let i = 0; i < 5; i++) {
                const cloud = document.createElement('div');
                cloud.className = 'sprite cloud';
                cloud.style.top = `${Math.random() * 40}%`;
                cloud.style.left = `${Math.random() * 90}%`;
                flyingScene.insertBefore(cloud, kirbyContainer);
            }
        }
        
        // NEW: Function to clear clouds
        function clearClouds() {
            flyingScene.querySelectorAll('.cloud').forEach(cloud => cloud.remove());
        }

        // --- Main Animation Sequence ---
        async function playIntro() {
            // --- Scene 1: Logos (3 seconds) ---
            switchScene(logoScene);
            // NEW: Add squash-in animation class to logos
            nintendoLogo.classList.add('squash-in');
            await sleep(200); // Stagger the second logo
            halkenLogo.classList.add('squash-in');
            await sleep(2800);

            // --- Scene 2: Flying Animation (11 seconds total) ---
            createClouds();
            switchScene(flyingScene);

            // 1. Kirby flies in from the right and zooms in (3 seconds)
            kirbyContainer.style.transition = 'transform 3s ease-out, left 3s ease-out, top 3s ease-out';
            kirbyContainer.style.left = '120%';
            kirbyContainer.style.top = '20%';
            kirbyContainer.style.transform = 'scale(0.5)';
            await sleep(50);
            kirbyContainer.style.left = '40%';
            kirbyContainer.style.top = '40%';
            kirbyContainer.style.transform = 'scale(1.5)';
            await sleep(3000);

            // 2. Camera pans down to the grass (1 second)
            // NEW: Clear the clouds before panning down
            clearClouds();
            grassField.style.transition = 'transform 1s ease-in';
            grassField.style.transform = 'rotateX(70deg) translateY(0px)';
            await sleep(1000);

            // 3. Kirby on ground (2 seconds)
            kirbyContainer.style.transition = 'transform 0.5s, top 0.5s';
            kirbyContainer.style.top = '60%'; // MODIFIED: Adjusted landing position for 3D plane
            kirbyContainer.style.transform = 'scale(1)';
            // NEW: Add landing animation
            kirbySprite.classList.add('squash-land');
            await sleep(500); // Let animation play
            kirbySprite.classList.remove('squash-land'); // Reset for next time
            await sleep(1500);

            // 4. Kirby takes off and flies away (3 seconds)
            // NEW: Add takeoff animation
            kirbySprite.classList.add('stretch-takeoff');
            // NEW: Re-create clouds for the ascent
            createClouds();
            grassField.style.transition = 'transform 2s ease-out';
            grassField.style.transform = 'rotateX(70deg) translateY(300px)'; // Move grass away
            kirbyContainer.style.transition = 'transform 3s ease-in, top 3s ease-in, left 3s ease-in';
            kirbyContainer.style.top = '-20%';
            kirbyContainer.style.left = '20%';
            kirbyContainer.style.transform = 'scale(0.2)';
            await sleep(3000);
            kirbySprite.classList.remove('stretch-takeoff'); // Reset class

            // 5. Short pause in dark blue (1 second)
            flyingScene.style.backgroundColor = '#002f6c';
            await sleep(1000);
            
            // --- Scene 3: Title Screen ---
            switchScene(titleScene);
            await sleep(3000);

            // --- Final Part: "Spring Breeze" appears ---
            springBreeze.style.opacity = 1;
        }

        playIntro();
    });
</script>

</body>
</html>
